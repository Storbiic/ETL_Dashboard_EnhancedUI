# Data Dictionary

## Overview
This document describes the structure and content of all tables generated by the ETL Dashboard for Power BI consumption.

## Tables

### 1. masterbom_clean
**Description**: Cleaned and standardized MasterBOM data with part information and project/plant statuses.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| part_id_std | string | Standardized part ID (cleaned, uppercase) | "7009-6933" |
| part_id_raw | string | Original part ID from source | "7009-6933 " |
| item_description | string | Part description | "CONNECTOR HOUSING" |
| supplier_name | string | Supplier name (titlecase) | "Yazaki Corporation" |
| supplier_pn | string | Supplier part number | "7116-4101-02" |
| original_supplier_name | string | Original supplier name | "Yazaki Corporation" |
| original_supplier_pn | string | Original supplier part number | "7116-4101-02" |
| customer_pn | string | Customer part number | "ABC123" |
| psw | string | PSW status | "OK" |
| psw_type | string | PSW type | "Type A" |
| psw_sub_type | string | PSW sub type | "Sub Type 1" |
| approved_date | date | Approval date | 2024-01-15 |
| approved_date_year | integer | Year from approved date | 2024 |
| approved_date_month | integer | Month from approved date | 1 |
| approved_date_day | integer | Day from approved date | 15 |
| approved_date_qtr | integer | Quarter from approved date | 1 |
| approved_date_week | integer | Week from approved date | 3 |
| psw_date_ok | date | PSW OK date | 2024-01-10 |
| part_specification | string | Part specification | "Spec v1.2" |
| plant_far | string | Plant FAR status | "OK" |
| ypn_status | string | YPN status | "Active" |
| handling_manual | string | Handling manual status | "Available" |
| customer_engineering_approval | string | Customer approval status | "Approved" |
| imds_status | string | IMDS status | "Yes" |
| imds_remarks | string | IMDS remarks | "Compliant" |
| far_status | string | FAR status | "OK" |
| far_promised_date | date | FAR promised date | 2024-02-01 |
| ppap_details | string | PPAP details | "Level 3" |
| is_duplicate_entry | boolean | Flag indicating if this row is a duplicate | false |
| __row_hash__ | string | Row hash for deduplication | "abc123..." |

### 2. status_clean
**Description**: Cleaned status summary data by project/OEM.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| oem | string | OEM name | "Toyota" |
| project | string | Project name | "BX726_BEV" |
| first_ppap_milestone | date | First PPAP milestone date | 2024-03-01 |
| total_part_numbers | integer | Total number of parts | 150 |
| psw_available | integer | Number of parts with PSW | 120 |
| drawing_available | integer | Number of parts with drawings | 140 |
| psw_available_pct | float | Percentage of parts with PSW | 0.80 |
| drawing_available_pct | float | Percentage of parts with drawings | 0.93 |

### 3. plant_item_status
**Description**: Normalized long table showing part status in each project/plant.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| part_id_std | string | Standardized part ID | "7009-6933" |
| part_id_raw | string | Original part ID | "7009-6933 " |
| project_plant | string | Project/plant identifier | "BX726_BEV_JOB1+90_YMOK" |
| raw_status | string | Raw status from source | "X" |
| status_class | string | Classified status | "active" |
| is_duplicate | boolean | Whether part is duplicate | false |
| is_new | boolean | Whether part is new | false |
| notes | string | Additional notes | "Standard part" |
| n_active | integer | Count of active statuses for this part | 3 |
| n_inactive | integer | Count of inactive statuses for this part | 1 |
| n_new | integer | Count of new statuses for this part | 0 |
| n_duplicate | integer | Count of duplicate statuses for this part | 0 |

### 4. fact_parts
**Description**: Part-level facts for analytics and reporting.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| part_id_std | string | Standardized part ID (Primary Key) | "7009-6933" |
| part_id_raw | string | Original part ID | "7009-6933 " |
| item_description | string | Part description | "CONNECTOR HOUSING" |
| supplier_name | string | Primary supplier | "Yazaki Corporation" |
| psw_ok | boolean | PSW is OK | true |
| has_handling_manual | boolean | Has handling manual | true |
| far_ok | boolean | FAR is OK | true |
| imds_ok | boolean | IMDS is compliant | true |
| ypn_status | string | YPN status | "Active" |
| total_plants | integer | Total plants using this part | 5 |
| active_plants | integer | Plants where part is active | 3 |
| inactive_plants | integer | Plants where part is inactive | 1 |
| new_plants | integer | Plants where part is new | 1 |
| duplicate_plants | integer | Plants where part is duplicate | 0 |
| latest_approved_date | date | Most recent approval date | 2024-01-15 |
| earliest_far_promised_date | date | Earliest FAR promised date | 2024-02-01 |

### 5. dim_dates
**Description**: Date dimension table for time-based analysis.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| date_value | date | The actual date | 2024-01-15 |
| year | integer | Year | 2024 |
| month | integer | Month | 1 |
| day | integer | Day | 15 |
| quarter | integer | Quarter | 1 |
| week | integer | Week of year | 3 |
| day_of_week | integer | Day of week (1=Monday) | 1 |
| day_name | string | Day name | "Monday" |
| month_name | string | Month name | "January" |
| quarter_name | string | Quarter name | "Q1" |
| role_col_name | string | Source column name | "approved_date" |
| is_weekend | boolean | Whether date is weekend | false |
| is_month_end | boolean | Whether date is month end | false |
| is_quarter_end | boolean | Whether date is quarter end | false |
| is_year_end | boolean | Whether date is year end | false |

### 6. project_completion_by_plant
**Description**: Normalized project completion status by plant/facility extracted from status sheet.

| Column | Type | Description | Example |
|--------|------|-------------|---------|
| project_name | string | Project name | "BX726_BEV_JOB1+90" |
| oem | string | OEM/Customer name | "Toyota" |
| plant_id | string | Plant/facility identifier | "YMOK" |
| plant_name | string | Plant/facility name | "Plant_YMOK" |
| overall_completion_pct | float | Overall project completion percentage | 0.85 |
| psw_completion_pct | float | PSW completion percentage | 0.90 |
| drawing_completion_pct | float | Drawing completion percentage | 0.88 |
| ppap_completion_pct | float | PPAP completion percentage | 0.75 |
| completion_status | string | Overall completion status | "In Progress" |
| milestone_date | date | Key milestone date | 2024-03-15 |
| total_parts | integer | Total number of parts in project | 150 |

## Status Classifications

### status_class Values
- **active**: Part is currently active (raw_status = "X")
- **inactive**: Part is no longer active (raw_status = "D")
- **new**: Part is new or not found (raw_status = blank/null)
- **duplicate**: Part marked as duplicate (raw_status = "0" with actual duplicates found)

### Boolean Flags
- **psw_ok**: PSW status is "OK" or equivalent
- **far_ok**: FAR status is "OK" or equivalent
- **imds_ok**: IMDS status is "Yes" or compliant
- **has_handling_manual**: Handling manual is "Available" or equivalent

## Relationships

### Primary Keys
- **masterbom_clean**: part_id_std + project_plant (composite)
- **fact_parts**: part_id_std
- **plant_item_status**: part_id_std + project_plant (composite)
- **dim_dates**: date_value + role_col_name (composite)
- **status_clean**: oem + project (composite)
- **project_completion_by_plant**: project_name + plant_id (composite)

### Foreign Keys
- **plant_item_status.part_id_std** → **fact_parts.part_id_std**
- **masterbom_clean.part_id_std** → **fact_parts.part_id_std**
- **project_completion_by_plant.project_name** → **status_clean.project**
- **project_completion_by_plant.milestone_date** → **dim_dates.date_value**
- Date columns → **dim_dates.date_value**

## Data Quality Notes

1. **part_id_std**: Cleaned using clean_id() function - removes special characters, collapses spaces, converts to uppercase
2. **Dates**: All date columns are parsed and validated, with derived date parts added
3. **Duplicates**: Duplicate rows are preserved and flagged with `is_duplicate_entry` column for analysis
4. **Missing Values**: Handled according to business rules (e.g., blank status = new)
5. **Text Fields**: Stripped of leading/trailing whitespace, newlines unescaped
6. **Project Completion**: Extracted from status sheet with plant-level granularity and completion percentages
